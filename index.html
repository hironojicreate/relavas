<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RelaVas v0.4 - Anchor System</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div id="ui-layer">
        <p>Tip: Á∑ö„ÅÆÁ´Ø„Çí„Éâ„É©„ÉÉ„Ç∞„Åó„Å¶ÁÆ±„Å´Ëøë„Å•„Åë„Çã„Å®Âê∏ÁùÄ„Åô„Çã„ÅÆ„ÄÇ</p>
        <p>Tip: Á∑ö„ÅÆ‰∏≠„Çí„ÇØ„É™„ÉÉ„ÇØ„ÅßÈñ¢ÁØÄËøΩÂä†„ÄÇShift„Éâ„É©„ÉÉ„Ç∞„ÅßÁõ¥ËßíÁ∂≠ÊåÅ„ÄÇ</p>
    </div>

    <div id="toolbar">
        <button id="btn-add-node" class="tool-btn" title="‰∫∫Áâ©„ÇíËøΩÂä†">Ôºã ‰∫∫Áâ©</button>
        <button id="btn-add-box" class="tool-btn" title="„Éú„ÉÉ„ÇØ„Çπ„ÇíËøΩÂä†">Ôºã „Éû„É´„ÉÅ„Éú„ÉÉ„ÇØ„Çπ</button>
        <button id="btn-delete" class="tool-btn danger" title="ÈÅ∏Êäû„Åó„ÅüÈ†ÖÁõÆ„ÇíÂâäÈô§">üóëÔ∏è ÂâäÈô§</button>
    </div>

    <div id="canvas-container">
        <svg id="svg-layer">

            <defs>
                <marker id="arrow-head-end" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"
                    markerUnits="strokeWidth">
                    <path d="M0,0 L0,6 L9,3 z" fill="context-stroke" />
                </marker>
                <marker id="arrow-head-start" markerWidth="10" markerHeight="10" refX="0" refY="3" orient="auto"
                    markerUnits="strokeWidth">
                    <path d="M9,0 L9,6 L0,3 z" fill="context-stroke" />
                </marker>
            </defs>
        </svg>

        <div id="snap-guide" class="snap-marker" style="display: none;"></div>
    </div>

    <div id="context-menu">
        <div id="menu-drag-handle" class="drag-handle">
            <div class="handle-bar"></div>
        </div>

        <button id="btn-duplicate" class="header-action-btn" title="Ë§áË£Ω„Çí‰ΩúÊàê">‚ùê</button>
        <div class="menu-header">
            <div id="preview-box" class="node-preview">
                <span id="preview-text">Sample</span>
                <div class="resize-handle nw" data-dir="nw"></div>
                <div class="resize-handle ne" data-dir="ne"></div>
                <div class="resize-handle sw" data-dir="sw"></div>
                <div class="resize-handle se" data-dir="se"></div>
            </div>

            <div id="preview-conn-container" class="node-preview"
                style="display: none; border: none; background: #f8f9fa;">
                <svg id="preview-conn-svg" width="100%" height="100%" style="overflow: visible;">

                    <defs>
                        <marker id="preview-marker-end" markerWidth="10" markerHeight="10" refX="0" refY="3"
                            orient="auto" markerUnits="userSpaceOnUse">
                            <path d="M0,0 L0,6 L9,3 z" fill="#555" />
                        </marker>

                        <marker id="preview-marker-start" markerWidth="10" markerHeight="10" refX="9" refY="3"
                            orient="auto" markerUnits="userSpaceOnUse">
                            <path d="M9,0 L9,6 L0,3 z" fill="#555" />
                        </marker>
                    </defs>
                    <path id="preview-conn-line" d="M 20,30 L 260,30" stroke="#555" stroke-width="2" fill="none" />
                    <rect id="preview-conn-label-bg" x="0" y="0" width="0" height="0" fill="white"
                        style="display:none;" />
                    <text id="preview-conn-label" x="140" y="30" text-anchor="middle" dominant-baseline="middle"
                        font-size="12" fill="#333" style="pointer-events: none;">Sample</text>
                </svg>
            </div>
        </div>

        <div class="menu-body">

            <div id="panel-node">
                <div style="padding: 12px 12px 0 12px;">
                    <div class="menu-section">
                        <label class="menu-label">ÂêçÂâç</label>
                        <textarea id="input-label" rows="1"
                            style="width: 100%; padding: 6px; box-sizing: border-box; resize: vertical;"></textarea>
                    </div>
                    <div class="menu-section">
                        <label class="menu-label">„Çµ„Ç§„Ç∫</label>
                        <div class="size-inputs">
                            <input type="number" id="input-width" value="120">
                            <input type="number" id="input-height" value="60">
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <div class="accordion-header">
                        üé® „Çπ„Çø„Ç§„É´
                        <span class="accordion-icon">‚ñº</span>
                    </div>
                    <div class="accordion-content">
                        <div class="menu-section">
                            <label class="menu-label">Êû†„ÅÆËâ≤</label>
                            <div id="palette-border" class="color-palette"></div>
                        </div>
                        <div class="menu-section">
                            <label class="menu-label">Êû†Â§™„Åï</label>
                            <div class="input-row">
                                <input type="number" id="input-border-width" value="2" min="0">
                                <div class="toggle-group" id="preset-border-width">
                                    <button data-val="1">Á¥∞</button>
                                    <button data-val="2">‰∏≠</button>
                                    <button data-val="5">Â§™</button>
                                </div>
                            </div>
                        </div>
                        <div class="menu-section">
                            <label class="menu-label">ÁÆ±„ÅÆÂΩ±</label>
                            <div id="toggle-box-shadow" class="toggle-group" style="width:100%">
                                <button data-val="none" style="flex:1">„Å™„Åó</button>
                                <button data-val="black" style="flex:1">Èªí</button>
                                <button data-val="white" style="flex:1">ÁôΩ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <div class="accordion-header">
                        üî§ ÊñáÂ≠óË®≠ÂÆö
                        <span class="accordion-icon">‚ñº</span>
                    </div>
                    <div class="accordion-content">
                        <div class="menu-section">
                            <label class="menu-label">ÊñáÂ≠óËâ≤</label>
                            <div id="palette-text" class="color-palette"></div>
                        </div>
                        <div class="menu-section">
                            <label class="menu-label">ÊñáÂ≠ó</label>
                            <div class="input-row">
                                <input type="number" id="input-font-size" value="14" min="8">
                                <span style="font-size:10px; align-self:center;">pt</span>
                                <div class="toggle-group" id="preset-font-size">
                                    <button data-val="12">Â∞è</button>
                                    <button data-val="14">‰∏≠</button>
                                    <button data-val="20">Â§ß</button>
                                </div>
                                <button id="btn-font-bold" class="icon-btn" title="Â§™Â≠ó">B</button>
                            </div>
                        </div>
                        <div class="menu-section">
                            <label class="menu-label">ÊñáÂ≠óËÉåÊôØ</label>
                            <div id="palette-text-bg" class="color-palette"></div>
                        </div>
                        <div class="menu-section">
                            <label class="menu-label">ÊñáÂ≠óÂΩ±</label>
                            <div id="toggle-text-shadow" class="toggle-group" style="width:100%">
                                <button data-val="none" style="flex:1">„Å™„Åó</button>
                                <button data-val="black" style="flex:1">Èªí</button>
                                <button data-val="white" style="flex:1">ÁôΩ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <div class="accordion-header">
                        üì∑ ÂÜôÁúü
                        <span class="accordion-icon">‚ñº</span>
                    </div>
                    <div class="accordion-content">
                        <div class="menu-section">
                            <button id="btn-upload-image" class="tool-btn" style="width:100%; justify-content:center;">
                                üì∑ ÂÜôÁúü„ÇíÈÅ∏Êäû
                            </button>
                            <input type="file" id="input-image-file" accept="image/*" style="display: none;">
                        </div>
                        <div class="menu-section">
                            <button id="btn-remove-image" class="tool-btn danger"
                                style="width:100%; justify-content:center; display:none;">
                                √ó ÂÜôÁúü„ÇíÂâäÈô§
                            </button>
                        </div>
                    </div>
                </div>

                <div class="menu-actions">
                    <button id="btn-menu-delete" class="btn-danger">üóëÔ∏è „Åì„ÅÆ‰∫∫Áâ©„ÇíÂâäÈô§</button>
                </div>
            </div>

            <div id="panel-box" style="display: none;">
                <div style="padding: 12px 12px 0 12px;">
                    <div class="accordion-item open">
                        <div class="accordion-header">
                            üé® „Çπ„Çø„Ç§„É´
                            <span class="accordion-icon">‚ñº</span>
                        </div>
                        <div class="accordion-content">
                            <div class="menu-section">
                                <label class="menu-label">Êû†„ÅÆËâ≤</label>
                                <div id="palette-box-border" class="color-palette"></div>
                            </div>
                            <div class="menu-section">
                                <label class="menu-label">Êû†Ë®≠ÂÆö</label>
                                <div class="input-row">
                                    <input type="number" id="input-box-border-width" value="2" min="0" title="Â§™„Åï">
                                    <div class="toggle-group" id="toggle-box-border-style"
                                        style="flex:1; margin-left:4px;">
                                        <button data-val="solid" style="flex:1">ÂÆüÁ∑ö</button>
                                        <button data-val="dashed" style="flex:1">Á†¥Á∑ö</button>
                                    </div>
                                </div>
                            </div>
                            <div class="menu-section">
                                <label class="menu-label">ÂΩ±</label>
                                <div id="toggle-box-box-shadow" class="toggle-group" style="width:100%">
                                    <button data-val="none" style="flex:1">„Å™„Åó</button>
                                    <button data-val="black" style="flex:1">Èªí</button>
                                    <button data-val="white" style="flex:1">ÁôΩ</button>
                                </div>
                            </div>
                            <div class="menu-section">
                                <label class="menu-label">Â°ó„Çä</label>
                                <div id="palette-box-bg" class="color-palette"></div>
                            </div>
                            <div class="menu-section">
                                <label class="menu-label">ÈÄèÈÅéÁéá</label>
                                <div class="input-row">
                                    <input type="range" id="input-box-opacity" min="0" max="100" value="100"
                                        style="flex:1;">
                                    <span id="val-box-opacity"
                                        style="width:30px; text-align:right; font-size:11px;">100%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header">
                            üî§ ÊñáÂ≠óË®≠ÂÆö
                            <span class="accordion-icon">‚ñº</span>
                        </div>
                        <div class="accordion-content">
                            <div class="menu-section" style="align-items: flex-start;">
                                <label class="menu-label" style="margin-top:4px;">ÂÜÖÂÆπ</label>
                                <textarea id="input-box-label" rows="3"
                                    style="width: 100%; padding: 6px; box-sizing: border-box; resize: vertical; font-family: sans-serif;"></textarea>
                            </div>
                            <div class="menu-section">
                                <label class="menu-label">ÈÖçÁΩÆ</label>
                                <div class="toggle-group" id="toggle-box-align" style="width:100%">
                                    <button data-val="left" style="flex:1">Â∑¶</button>
                                    <button data-val="center" style="flex:1">‰∏≠</button>
                                    <button data-val="right" style="flex:1">Âè≥</button>
                                </div>
                            </div>
                            <div class="menu-section">
                                <label class="menu-label">ÊñáÂ≠óËâ≤</label>
                                <div id="palette-box-text" class="color-palette"></div>
                            </div>
                            <div class="menu-section">
                                <label class="menu-label">„Çµ„Ç§„Ç∫</label>
                                <div class="input-row">
                                    <input type="number" id="input-box-font-size" value="14" min="8">
                                    <div class="toggle-group" id="preset-box-font-size">
                                        <button data-val="12">Â∞è</button>
                                        <button data-val="14">‰∏≠</button>
                                        <button data-val="20">Â§ß</button>
                                    </div>
                                    <button id="btn-box-bold" class="icon-btn" title="Â§™Â≠ó">B</button>
                                </div>
                            </div>
                            <div class="menu-section">
                                <label class="menu-label">ÊñáÂ≠óËÉåÊôØ</label>
                                <div id="palette-box-text-bg" class="color-palette"></div>
                            </div>
                            <div class="menu-section">
                                <label class="menu-label">ÊñáÂ≠óÂΩ±</label>
                                <div id="toggle-box-text-shadow" class="toggle-group" style="width:100%">
                                    <button data-val="none" style="flex:1">„Å™„Åó</button>
                                    <button data-val="black" style="flex:1">Èªí</button>
                                    <button data-val="white" style="flex:1">ÁôΩ</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="menu-actions">
                    <button id="btn-box-delete" class="btn-danger">üóëÔ∏è „Åì„ÅÆ„Éú„ÉÉ„ÇØ„Çπ„ÇíÂâäÈô§</button>
                </div>
            </div>

            <div id="panel-conn" style="display: none;">

                <div class="accordion-item open">
                    <div class="accordion-header">
                        üé® Á∑ö„ÅÆ„Çπ„Çø„Ç§„É´
                        <span class="accordion-icon">‚ñº</span>
                    </div>
                    <div class="accordion-content">
                        <div class="menu-section">
                            <label class="menu-label">Á∑ö„ÅÆËâ≤</label>
                            <div id="palette-conn-stroke" class="color-palette"></div>
                        </div>
                        <div class="menu-section">
                            <label class="menu-label">Â§™„Åï</label>
                            <div class="input-row">
                                <input type="number" id="input-conn-width" value="2" min="1">
                                <div class="toggle-group" id="preset-conn-width">
                                    <button data-val="2">Á¥∞</button>
                                    <button data-val="4">‰∏≠</button>
                                    <button data-val="6">Â§™</button>
                                </div>
                            </div>
                        </div>
                        <div class="menu-section">
                            <label class="menu-label">ÂΩ¢Áä∂</label>
                            <div class="toggle-group" id="toggle-conn-dash" style="width: 100%;">
                                <button data-val="solid" style="flex:1;">ÂÆüÁ∑ö</button>
                                <button data-val="dashed" style="flex:1;">Á†¥Á∑ö</button>
                            </div>
                        </div>
                        <div class="menu-section">
                            <label class="menu-label">Áü¢Âç∞</label>
                            <div class="toggle-group" id="toggle-conn-arrow" style="width: 100%;">
                                <button data-val="none" style="flex:1;">„Å™„Åó</button>
                                <button data-val="start" style="flex:1;">‚Üê</button>
                                <button data-val="end" style="flex:1;">‚Üí</button>
                                <button data-val="both" style="flex:1;">‚áÑ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <div class="accordion-header">
                        üî§ „É©„Éô„É´Ë®≠ÂÆö
                        <span class="accordion-icon">‚ñº</span>
                    </div>
                    <div class="accordion-content">
                        <div class="menu-section">
                            <label class="menu-label">ÂÜÖÂÆπ</label>
                            <textarea id="input-conn-label" rows="1" placeholder="Èñ¢‰øÇÂêç..."
                                style="width: 100%; padding: 6px; box-sizing: border-box; resize: vertical;"></textarea>
                        </div>
                        <div class="menu-section">
                            <label class="menu-label">ÊñπÂêë</label>
                            <div class="toggle-group" id="toggle-conn-vertical" style="width: 100%;">
                                <button data-val="horizontal" style="flex:1;">Ê®™Êõ∏„Åç</button>
                                <button data-val="vertical" style="flex:1;">Á∏¶Êõ∏„Åç</button>
                            </div>
                        </div>
                        <div class="menu-section">
                            <label class="menu-label">ÊñáÂ≠óËâ≤</label>
                            <div id="palette-conn-text" class="color-palette"></div>
                        </div>
                        <div class="menu-section">
                            <label class="menu-label">„Çµ„Ç§„Ç∫</label>
                            <div class="input-row">
                                <input type="number" id="input-conn-font-size" value="12" min="8">
                                <span style="font-size:10px; align-self:center;">pt</span>
                                <div class="toggle-group" id="preset-conn-font-size">
                                    <button data-val="10">Â∞è</button>
                                    <button data-val="12">‰∏≠</button>
                                    <button data-val="16">Â§ß</button>
                                </div>
                                <button id="btn-conn-bold" class="icon-btn" title="Â§™Â≠ó">B</button>
                            </div>
                        </div>
                        <div class="menu-section">
                            <label class="menu-label">ÊñáÂ≠óËÉåÊôØ</label>
                            <div id="palette-conn-bg" class="color-palette"></div>
                        </div>
                    </div>
                </div>

                <div class="menu-actions">
                    <button id="btn-conn-delete" class="btn-danger">üóëÔ∏è „Åì„ÅÆÁ∑ö„ÇíÂâäÈô§</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>